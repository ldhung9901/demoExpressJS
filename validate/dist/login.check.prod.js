"use strict";var low=require("lowdb"),FileSync=require("lowdb/adapters/FileSync"),adapter=new FileSync("db.json"),db=low(adapter),express=require("express"),app=express();module.exports.loginCheck=function(e,r,o){db.read();var d=db.get("users").find({name:e.body.name}),s=[];return void 0===d.value()?(s.push("User doesn't exist."),r.render("./login",{error:s,value:e.body.name})):e.body.name===d.value().name&&e.body.password===d.value().password?(r.cookie("id",d.value().id,{signed:!0}),app.locals.user1=d.value(),r.locals.user1=app.locals.user1,o()):(d.password!==e.body.password&&s.push("Wrong password."),s!==[]?r.render("./login",{error:s,value:e.body.name}):void 0)},module.exports.logincheck_2=function(e,r,o){if(void 0===e.signedCookies.id)return r.render("./login",{error:[],value:e.body.name});e.signedCookies.id===db.get("users").find({id:e.signedCookies.id}).value().id&&o()};